<%-include("../../views/partials/user/header")%>

<style>

.pagination .page-item.active .page-link {
    background-color: #fd7e14; /* Bootstrap "danger" color for background */
    border-color: #fd7e14;
	/* Matching border color */
    color: #fff; /* White text */
  }
  .pagination .page-item.active .page-link:hover {
    background-color: #fd7e14;
	/* Slightly darker shade for hover effect */
    border-color: #fd7e14;

  }


  .no-products {
    text-align: center;
    margin: 100px 0;
    padding: 40px 20px;
    border: 2px dashed #ddd;
    border-radius: 10px;
    background-color: #f9f9f9;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
}

.no-products h3 {
    font-size: 28px;
    color: #333;
    margin-top: 20px;
}

.no-products p {
    font-size: 16px;
    color: #666;
    margin-bottom: 30px;
}

.no-products-img {
    width: 180px;
    opacity: 0.8;
}

.btn-browse {
    display: inline-block;
    padding: 12px 30px;
    font-size: 16px;
    color: #fff;
    /* background-color: #007bff; */
    text-decoration: none;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

.btn-browse:hover {
    background-color: #0056b3;
}


</style>

	<!-- End Header Area -->
	<!-- Start Banner Area -->
	<section class="banner-area organic-breadcrumb">
		<div class="container">
			<div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
				<div class="col-first">
					<h1>Shop Here</h1>
					<nav class="d-flex align-items-center">
						<a href="/">Home<span class="lnr lnr-arrow-right"></span></a>
						<a href="#">Shop</a>
					</nav>
				</div>
			</div>
		</div>
	</section>
	<!-- End Banner Area -->
	 <br>
	<div class="container">


		<!-- <form class="d-flex" action="/search" method="post">
			<input class="form-control me-2" type="search" name="query" placeholder="Search for products..." aria-label="Search">
			<button class="btn btn-warning  ml-2" type="submit">Search</button>
		  </form> -->
		<!-- <br><br> -->
		  
		<div class="row">
			<div class="col-xl-3 col-lg-4 col-md-5">
				<div class="sidebar-categories">
					<div class="head">Browse Categories</div>
	<ul class="main-categories">
    <li class="main-nav-list">
        <a data-toggle="collapse" href="#fruitsVegetable" aria-expanded="false" aria-controls="fruitsVegetable">
            <span class="lnr lnr-arrow-right"></span>Categories
            <span class="number"><%=category.length %></span>
        </a>
        <ul class="collapse" id="fruitsVegetable" data-toggle="collapse" aria-expanded="false" aria-controls="fruitsVegetable">
            <% for (let i = 0; i < category.length; i++) { %>
                <li class="main-nav-list child">
					<input id="catId" type="hidden" value="<%= category[i]._id%>">
                    <a href="/filterProducct?categoryId=<%= category[i]._id%>"><%= category[i].name %>
                        <span class="number"></span>
                    </a>
                </li>
            <% } %>
        </ul>
    </li>
<a href="/clearFilters"><span>Clear All Filters</span></a>
						<!-- <li class="main-nav-list"><a data-toggle="collapse" href="#meatFish" aria-expanded="false" aria-controls="meatFish"><span
								 class="lnr lnr-arrow-right"></span>Women’s Footwear<span class="number">(53)</span></a>
								 <ul class="collapse" id="fruitsVegetable" data-toggle="collapse" aria-expanded="false" aria-controls="fruitsVegetable">
									<li class="main-nav-list child"><a href="#">Casual Shoes<span class="number">(13)</span></a></li>
									<li class="main-nav-list child"><a href="#">Formal Shoes<span class="number">(09)</span></a></li>
									<li class="main-nav-list child"><a href="#">Sports Shoes<span class="number">(17)</span></a></li>
									<li class="main-nav-list child"><a href="#">Sneakers<span class="number">(01)</span></a></li>
									<li class="main-nav-list child"><a href="#">Boots<span class="number">(11)</span></a></li>
									<li class="main-nav-list child"><a href="#">Sandals & Slippers<span class="number">(11)</span></a></li>
									<li class="main-nav-list child"><a href="#">Loafers & Moccasins<span class="number">(11)</span></a></li>
								</ul>
						</li>
						<li class="main-nav-list"><a data-toggle="collapse" href="#cooking" aria-expanded="false" aria-controls="cooking"><span
								 class="lnr lnr-arrow-right"></span>Kids’ Footwear<span class="number">(53)</span></a>
								 <ul class="collapse" id="fruitsVegetable" data-toggle="collapse" aria-expanded="false" aria-controls="fruitsVegetable">
									<li class="main-nav-list child"><a href="#">Casual Shoes<span class="number">(13)</span></a></li>
									<li class="main-nav-list child"><a href="#">Formal Shoes<span class="number">(09)</span></a></li>
									<li class="main-nav-list child"><a href="#">Sports Shoes<span class="number">(17)</span></a></li>
									<li class="main-nav-list child"><a href="#">Sneakers<span class="number">(01)</span></a></li>
									<li class="main-nav-list child"><a href="#">Boots<span class="number">(11)</span></a></li>
									<li class="main-nav-list child"><a href="#">Sandals & Slippers<span class="number">(11)</span></a></li>
									<li class="main-nav-list child"><a href="#">Loafers & Moccasins<span class="number">(11)</span></a></li>
								</ul>
						</li> -->
					
					</ul>
				</div>
				<div class="sidebar-filter mt-50">
					<!-- <div class="top-filter-head">Product Filters</div> -->
					<!-- <div class="common-filter">
						<div class="head">Brands</div>
						<form action="#">
							<ul>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="apple" name="brand"><label for="apple">Nike<span>(29)</span></label></li>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="asus" name="brand"><label for="asus">Adidas<span>(29)</span></label></li>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="gionee" name="brand"><label for="gionee">Puma<span>(19)</span></label></li>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="micromax" name="brand"><label for="micromax">Reebok<span>(19)</span></label></li>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="samsung" name="brand"><label for="samsung">Crocs<span>(19)</span></label></li>
							</ul>
						</form>
					</div> -->
					<!-- <div class="common-filter">
						<div class="head">Color</div>
						<form action="#">
							<ul>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="black" name="color"><label for="black">Black<span>(29)</span></label></li>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="balckleather" name="color"><label for="balckleather">Black
										Leather<span>(29)</span></label></li>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="blackred" name="color"><label for="blackred">Black
										with red<span>(19)</span></label></li>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="gold" name="color"><label for="gold">Gold<span>(19)</span></label></li>
								<li class="filter-list"><input class="pixel-radio" type="radio" id="spacegrey" name="color"><label for="spacegrey">Spacegrey<span>(19)</span></label></li>
							</ul>
						</form>
					</div> -->

					
					<!-- <div class="common-filter">
						<div class="head">Price</div>
						<div class="price-range-area">
							<div id="price-range"></div>
							<div class="value-wrapper d-flex">
								<div class="price">Price:</div>
								<span>₹</span>
								<div id="lower-value"></div>
								<div class="to">to</div>
								<span>₹</span>
								<div id="upper-value"></div>
							</div>
						</div>
					</div> -->


					<div class="common-filter">
						<div class="head">Price</div>
						<div class="price-range-area">
							<form action="/filterByPrice" method="post">
							<input type="hidden" name="minPrice" id="minPrice" >
							<input type="hidden" name="maxPrice" id="maxPrice" >
							<div id="price-range"></div>
							<div class="value-wrapper d-flex mt-3">
								<div class="price">Price:</div>
								<span>₹</span>
								<div contenteditable="true" id="lower-value"><%=minPrice %></div>
								<div class="to">to</div>
								<span>₹</span>
								<div contenteditable="true" id="upper-value"><%=maxPrice %></div><br><br>
							</div>

							

							<button id="applyPriceFilter" type="submit" onclick="updateHiddenInputsAndSubmit()" class="btn primary-btn mt-3">Apply</button>
						</form>
						</div>


<!-- 
						<div class="common-filter">
							<div class="head">Price</div>
							<div class="price-range-area">
								<form id="priceFilterForm">
									<div class="value-wrapper d-flex mt-3">
										<div class="price">Price:</div>
										<span>₹</span>
										<input type="number" name="minPrice" id="lower-value" value="0" class="price-input">
										<div class="to">to</div>
										<span>₹</span>
										<input type="number" name="maxPrice" id="upper-value" value="10000" class="price-input">
									</div>
									<button type="submit" class="btn btn-primary mt-3">Apply</button>
								</form>
							</div>
						</div> -->
					
						

					</div>
					

				</div>
			</div>
			<div class="col-xl-9 col-lg-8 col-md-7">
				<!-- Start Filter Bar -->
				<div class="filter-bar d-flex flex-wrap align-items-center">
					
					<div class="sorting mr-auto">
						<h5 class="text-white">Filter Aplied</h5>
						<p class="text-warning f-1"><%=minPrice %>.00 to <%=maxPrice %>.00</p>

						<!-- <select>
							<option value="1">Show 12</option>
							<option value="1">Show 12</option>
							<option value="1">Show 12</option>
						</select> -->
					</div>

					<div class="sorting">
						<select onchange="location = this.value;">
							<option value="/shopSort?sort=All" selected><%=sortt %> </option>
							<option value="/shopSort?sort=New Arrivals">New Arrivals</option>
							<option value="/shopSort?sort=Most Popular">Most Popular</option>
							<option value="/shopSort?sort=Price : Low to High">Price : Low to High</option>
							<option value="/shopSort?sort=Price : High to Low">Price : High to Low</option>
							<option value="/shopSort?sort=Name : A to Z">Name : A to Z</option>
							<option value="/shopSort?sort=Name : Z to A">Name : Z to A</option>
							<option value="/shopSort?sort=Average Rating">Average Rating</option>
						</select>
						
					</div>

					<!-- <div class="pagination">
						<a href="#" class="prev-arrow"><i class="fa fa-long-arrow-left" aria-hidden="true"></i></a>
						<a href="#" class="active">1</a>
						<a href="#">2</a>
						<a href="#">3</a>
						<a href="#" class="dot-dot"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></a>
						<a href="#">6</a>
						<a href="#" class="next-arrow"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></a>
					</div> -->

					<div class="pagination-area ">
						<nav aria-label="Page navigation example">
							<ul class="pagination justify-content-center">
								<!-- Back Button (Hidden if on the first page) -->
								<% if (currentPage > 1) { %>
									<li class="page-item">
										<a class="page-link text-danger" href="?page=<%= currentPage - 1 %>" aria-label="Previous">
											<span aria-hidden="true">&laquo;</span>
										</a>
									</li>
								<% } %>
					
								<!-- Page Numbers -->
								<% 
									const visiblePages = 3; // Number of pages to show at a time
									const startPage = Math.max(1, currentPage - Math.floor(visiblePages / 2));
									const endPage = Math.min(totalPages, startPage + visiblePages - 1);
								%>
								<% for (let i = startPage; i <= endPage; i++) { %>
									<li class="page-item <%= (i === currentPage) ? 'active' : '' %>">
										<a class="page-link text-danger" href="?page=<%= i %>">
											<%= i %>
										</a>
									</li>
								<% } %>
					
								<!-- Next Button (Hidden if on the last page) -->
								<% if (currentPage < totalPages) { %>
									<li class="page-item">
										<a class="page-link text-danger" href="?page=<%= currentPage + 1 %>" aria-label="Next">
											<span aria-hidden="true">&raquo;</span>
										</a>
									</li>
								<% } %>
							</ul>
						</nav>
					</div>

				</div>
				<!-- End Filter Bar -->
				<!-- Start Best Seller -->
				<section class="lattest-product-area pb-40 category-list">
					<% if (product.length <=0) { %>
						<div class="no-products">
							<img src="/img/notProduct.png" alt="No products" class="no-products-img">
							<h3>Oops! No Products Found</h3>
							<p>We couldn't find any products matching your search.</p>
							<a href="/shop" class="primary-btn">Browse All Products</a>
						</div>
					<% } else { %>

					<div class="row">
						<% for(let i = 0; i < product.length; i++) { %>

						<!-- single product -->
						<div class="col-lg-4 col-md-6">
							<div class="single-product">
								<a href="/productDetails?id=<%=product[i]._id%>">
								<img class="img-fluid" src="/uploads/product-images/<%= product[i].productImage[0] %>" alt="<%= product[i].productName %>">
								<div class="product-details">
									<h6><%= product[i].productName %></h6>
									<div class="price">
										<h6>₹<%= product[i].salePrice %>.00</h6>
										<h6 class="l-through text-secondary">₹<%= product[i].regularPrice %>.00</h6>
									</div>
									
								</a>
									<div class="prd-bottom">

										<a href="" class="social-info">
											<span class="ti-bag"></span>
											<p class="hover-text " style="width: 200px;">add to cart </p>
										</a>
										<span></span>
										<a href="" class="social-info">
											<span class="lnr lnr-heart"></span>
											<p class="hover-text">Wishlist</p>
										</a>
										<!-- <a href="" class="social-info">
											<span class="lnr lnr-sync"></span>
											<p class="hover-text">compare</p>
										</a>
										<a href="" class="social-info">
											<span class="lnr lnr-move"></span>
											<p class="hover-text">view more</p>
										</a> -->
									</div>
								</div>
							</div>
						</div>
						<% } %>
						<!-- single product -->
						
					</div>
					<% } %>
				</section>
				<!-- End Best Seller -->
				<!-- Start Filter Bar -->
				<!-- <div class="filter-bar d-flex flex-wrap align-items-center">
					<div class="sorting mr-auto">
						<select>
							<option value="1">Show 12</option>
							<option value="1">Show 12</option>
							<option value="1">Show 12</option>
						</select>
					</div>
					<div class="pagination">
						<a href="#" class="prev-arrow"><i class="fa fa-long-arrow-left" aria-hidden="true"></i></a>
						<a href="#" class="active">1</a>
						<a href="#">2</a>
						<a href="#">3</a>
						<a href="#" class="dot-dot"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></a>
						<a href="#">6</a>
						<a href="#" class="next-arrow"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></a>
					</div>
				</div> -->
				<!-- End Filter Bar -->
			</div>
		</div>
	</div>

	<!-- Start related-product Area -->
	<!-- <section class="related-product-area section_gap">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-lg-6 text-center">
					<div class="section-title">
						<h1>Deals of the Week</h1>
						<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore
							magna aliqua.</p>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-9">
					<div class="row">
						<div class="col-lg-4 col-md-4 col-sm-6 mb-20">
							<div class="single-related-product d-flex">
								<a href="#"><img src="img/r1.jpg" alt=""></a>
								<div class="desc">
									<a href="#" class="title">Black lace Heels</a>
									<div class="price">
										<h6>$189.00</h6>
										<h6 class="l-through">$210.00</h6>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-6 mb-20">
							<div class="single-related-product d-flex">
								<a href="#"><img src="img/r2.jpg" alt=""></a>
								<div class="desc">
									<a href="#" class="title">Black lace Heels</a>
									<div class="price">
										<h6>$189.00</h6>
										<h6 class="l-through">$210.00</h6>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-6 mb-20">
							<div class="single-related-product d-flex">
								<a href="#"><img src="img/r3.jpg" alt=""></a>
								<div class="desc">
									<a href="#" class="title">Black lace Heels</a>
									<div class="price">
										<h6>$189.00</h6>
										<h6 class="l-through">$210.00</h6>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-6 mb-20">
							<div class="single-related-product d-flex">
								<a href="#"><img src="img/r5.jpg" alt=""></a>
								<div class="desc">
									<a href="#" class="title">Black lace Heels</a>
									<div class="price">
										<h6>$189.00</h6>
										<h6 class="l-through">$210.00</h6>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-6 mb-20">
							<div class="single-related-product d-flex">
								<a href="#"><img src="img/r6.jpg" alt=""></a>
								<div class="desc">
									<a href="#" class="title">Black lace Heels</a>
									<div class="price">
										<h6>$189.00</h6>
										<h6 class="l-through">$210.00</h6>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-6 mb-20">
							<div class="single-related-product d-flex">
								<a href="#"><img src="img/r7.jpg" alt=""></a>
								<div class="desc">
									<a href="#" class="title">Black lace Heels</a>
									<div class="price">
										<h6>$189.00</h6>
										<h6 class="l-through">$210.00</h6>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-6">
							<div class="single-related-product d-flex">
								<a href="#"><img src="img/r9.jpg" alt=""></a>
								<div class="desc">
									<a href="#" class="title">Black lace Heels</a>
									<div class="price">
										<h6>$189.00</h6>
										<h6 class="l-through">$210.00</h6>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-6">
							<div class="single-related-product d-flex">
								<a href="#"><img src="img/r10.jpg" alt=""></a>
								<div class="desc">
									<a href="#" class="title">Black lace Heels</a>
									<div class="price">
										<h6>$189.00</h6>
										<h6 class="l-through">$210.00</h6>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-6">
							<div class="single-related-product d-flex">
								<a href="#"><img src="img/r11.jpg" alt=""></a>
								<div class="desc">
									<a href="#" class="title">Black lace Heels</a>
									<div class="price">
										<h6>$189.00</h6>
										<h6 class="l-through">$210.00</h6>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-lg-3">
					<div class="ctg-right">
						<a href="#" target="_blank">
							<img class="img-fluid d-block mx-auto" src="img/category/c5.jpg" alt="">
						</a>
					</div>
				</div>
			</div>
		</div>
	</section> -->
	<!-- End related-product Area -->


<script>

	// Update hidden inputs when user types price manually
	function updateHiddenInputsAndSubmit() {
    // Get the values from the contenteditable divs
    var lowerValue = document.getElementById('lower-value').textContent || document.getElementById('lower-value').innerText;
    var upperValue = document.getElementById('upper-value').textContent || document.getElementById('upper-value').innerText;

    // Update the hidden input fields
    document.getElementById('minPrice').value = lowerValue;
    document.getElementById('maxPrice').value = upperValue;

    // Now submit the form (you can also use AJAX here if you don't want a page reload)
    document.querySelector('form').submit();
}




</script>
	

	<%-include("../../views/partials/user/footer")%>
