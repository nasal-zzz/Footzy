<%-include("../../views/partials/admin/header")%>

<link href="https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.css" rel="stylesheet">

<section class="content-main">
    <div class="row align-items-start">
        <form method="post" action="/admin/addProduct" enctype="multipart/form-data" id="addProductForm">
            <div class="col-9">
                <div class="content-header">
                    <h2 class="content-title">Add New Product</h2>
                    <div class="d-flex justify-content-end gap-3">
                        <button type="button" class="btn btn-light">Cancel</button>
                        <button type="submit" class="btn btn-primary">Publish</button>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="card mb-2">
                    <div class="card-header">
                        <h4>Basic</h4>
                    </div>
                    <div class="card-body">
                        <div class="mb-4">
                            <label for="product_name" class="form-label">Product Name</label>
                            <input type="text" name="productName" placeholder="Type here" class="form-control" id="productName">
                            <div id="name-error" class="error-message text-danger"></div>
                        </div>
                        <div class="mb-4">
                            <label class="form-label">Product Description</label>
                            <textarea placeholder="Type here" class="form-control" rows="4" name="productDescription" id="productDescription"></textarea>
                            <div id="description-error" class="error-message text-danger"></div>
                        </div>
                        <div class="row">
                            <div class="col-lg-4">
                                <div class="mb-4">
                                    <label class="form-label">Regular price</label>
                                    <input placeholder="₹" type="text" id="regularPrice" name="regularPrice" class="form-control">
                                    <div id="regularPrice-error" class="error-message text-danger"></div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-4">
                                    <label class="form-label">Sale price</label>
                                    <input placeholder="₹" type="text" id="salePrice" name="salePrice" class="form-control">
                                    <div id="salePrice-error" class="error-message text-danger"></div>
                                </div>
                            </div>
                            <div class="col-lg-4">
                                <div class="mb-4">
                                    <label class="form-label">Stock</label>
                                    <input placeholder="0" type="text" id="stock" name="stock" class="form-control">
                                    <div id="stock-error" class="error-message text-danger"></div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-4">
                            <label class="form-label">Status</label>
                            <select class="form-select" name="status" id="status">
                                <option value="Available">Available</option>
                                <option value="Sold Out">Sold Out</option>
                            </select>
                        </div>
                        <div class="mb-4">
                            <label class="form-label">Category</label>
                            <select class="form-select" name="category" id="category">
                                <% for(let i=0;i<category.length;i++){ %>
                                <option value="<%=category[i].name%>"><%=category[i].name%></option>
                                <% } %>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="card mb-4">
                    <div class="card-header">
                        <h4>Media</h4>
                    </div>
                    <div class="card-body">
                        <!-- Image upload and cropper -->
                        <% for (let i = 1; i <= 3; i++) { %>
                        <div class="mb-4">
                            <div class="input-upload">
                                <img src="" id="imgView<%= i %>" alt="Preview Image <%= i %>" style="max-width: 100%; height: auto;">
                                <input class="form-control" type="file" name="images" id="input<%= i %>"
                                    accept="image/png, image/jpeg" onchange="viewImage(event, <%= i %>)">
                            </div>
                            <div class="image-cropper d-flex align-items-center" style="display:none; margin-top: 10px;">
                                <img src="" id="croppedImg<%= i %>" alt="Cropped Image <%= i %>" style="max-width: 100%; height: auto;">
                                <button type="button" id="saveButton<%= i %>" class="btn-sm btn-primary">Save</button>
                            </div>
                        </div>
                        <% } %>
                    </div>
                </div>
            </div>
        </form>
    </div>
</section>

<script src="/admin/scripts/addProduct.js"></script>
<script src="https://cdn.jsdelivr.net/npm/cropperjs@1.5.12/dist/cropper.min.js"></script>

<%-include("../../views/partials/admin/footer")%>
